{% extends "base.html" %}

{% block title %}Форма заполнения заказа{% endblock %}

{% block content %}
<div class="container">
    <div class="row mt-5">
        <div class="col-sm-4 mx-auto">
            <h1 class="text-center mb-3" >Заполните форму</h1>
            <form action="" method="post" class="order-form mb-5">
                <input class="form-control mb-3" placeholder="{{ form.first_name.label}}" type="text" name="{{ form.first_name.name }}">
                <input class="form-control mb-3" placeholder="{{ form.last_name.label }}" type="text" name="{{ form.last_name.name }}">
                <input class="form-control mb-3" placeholder="{{ form.email.label }}" type="text" name="{{ form.email.name }}">
                <input class="form-control mb-3" placeholder="{{ form.address.label }}" type="text" name="{{ form.address.name }}">
                <input class="form-control mb-3" placeholder="{{ form.postal_code.label }}" type="text" name="{{ form.postal_code.name }}">
                <input class="form-control mb-3" placeholder="{{ form.city.label }}" type="text" name="{{ form.city.name }}">
                <input class="form-control mb-3" placeholder="{{ form.phone_number.label }}" type="number" name="{{ form.phone_number.name }}">
                <input class="me-2 form-check-input" type="checkbox" name="{{ form.user_agreement.name }}">Принять политику
                <a id="open-modal-btn" href="#">конфиденциальности</a>
                <p>{{form.errors}}</p>
                <div class="d-grid gap-2">
                  {% if user.is_authenticated %}
                    <button class="btn btn-primary" type="submit">Продолжить</button>
                  {% else %}
                    <a class="btn btn-primary" href="{% url 'account_login' %}">Пожалуйста войдите в учетную запись</a>
                </div>
                  {% endif %}
                {% csrf_token %}
            </form>
            {% include 'modal/user_agreement.html' %}
            <div class="order-info">
                <div class="p-4" style="border-radius: 5px; background: rgba(0, 255, 255, 0.3)">
                    <h3>Ваш заказ</h3>
                <ul>
                    {% for item in cart %}
                        <li>
                            {{ item.quantity }}x {{ item.product.title }}
                            <span>₽{{ item.total_price }}</span>
                        </li>
                    {% endfor %}
                </ul>
                <p style="font-size: 19px;"><strong>Сумма к оплате: ₽{{ cart.get_total_price }}</strong></p>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}